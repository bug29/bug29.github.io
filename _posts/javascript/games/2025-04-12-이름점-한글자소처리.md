---
title: '[이름점] 한글자소처리'
date: 2025-04-12 14:20:00 +09:00
last_modified_at : 2025-04-12 10:30:00 +09:00
categories: [javascript, games]
tags: [games, jquery, javascript]
excerpt: "한글 자소 처리에 대해 설명합니다."
toc: true
toc_sticky: true
use_math: true
---

# OUTLINE

## SUMMARY
- 많은 분들이 익히 아시다시피 한글은 **초성(初聲)+중성(中聲)+종성(終聲)**의 조합으로 한 글자가 구성됩니다.
- 때문에 컴퓨터에서 한글은 초성, 중성, 종성을 각각 항목으로 하는 테이블로 구성할 수 있습니다.
- 이제 한글 한 글자의 **UTF-16 코드**를 알면, 이 글자의 초성, 중성, 종성을 구별해 낼 수 있습니다.

## 자소별 테이블
- 초성(19자)

  |0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|
  |:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
  |ㄱ|ㄲ|ㄴ|ㄷ|ㄸ|ㄹ|ㅁ|ㅂ|ㅃ|ㅅ|ㅆ|ㅇ|ㅈ|ㅉ|ㅊ|ㅋ|ㅌ|ㅍ|ㅎ|

  <br/>

- 중성(21자, A.K.A "모음")

  |0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|
  |:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
  |ㅏ|ㅐ|ㅑ|ㅒ|ㅓ|ㅔ|ㅕ|ㅖ|ㅗ|ㅘ|ㅙ|ㅚ|ㅛ|ㅜ|ㅝ|ㅞ|ㅟ|ㅠ|ㅡ|ㅢ|ㅣ|

  <br/>

- 종성(28자, A.K.A "받침")

  |0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|
  |:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
  |없음|ㄱ|ㄲ|ㄳ|ㄴ|ㄵ|ㄶ|ㄷ|ㄹ|ㄺ|ㄻ|ㄼ|ㄽ|ㄾ|ㄿ|ㅀ|ㅁ|ㅂ|ㅄ|ㅅ|ㅆ|ㅇ|ㅈ|ㅊ|ㅋ|ㅌ|ㅍ|ㅎ|

## 한글의 구성
- 이제 위의 테이블을 이용하여 한글의 한 글자를 구성할 수 있습니다. 먼저 초성의 한 글자에 대해(예를 들어, "ㄱ") 중성의 테이블을 매칭하고("가", "개", "갸", ...), 다시 각 초성+중성마다 종성을 매칭합니다. ("가", "각", "갂", "갃", ...)

  :point_right: "ㄱ"인 경우

  | |ㅏ|ㅐ|ㅑ|ㅒ|ㅓ|ㅔ|ㅕ|ㅖ|ㅗ|ㅘ|ㅙ|ㅚ|ㅛ|ㅜ|ㅝ|ㅞ|ㅟ|ㅠ|ㅡ|ㅢ|ㅣ|
  |:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
  |없음|가|개|갸|걔|거|게|겨|계|고|과|괘|괴|교|구|궈|궤|귀|규|그|긔|기|
  |ㄱ|각|객|갹|걕|걱|겍|격|곅|곡|곽|괙|괵|굑|국|궉|궥|귁|귝|극|긕|긱|
  |ㄲ|갂|갞|갺|걖|걲|겎|겪|곆|곢|곾|괚|괶|굒|굮|궊|궦|귂|귞|귺|귂|긲|
  |ㄳ|갃|갟|갻|걗|걳|겏|겫|곇|곣|곿|괛|괷|굓|굯|궋|궧|귃|귟|귻|귃|긳|

  ...이하 생략

- 물론 이렇게 매칭하면 실제로는 실생활에 사용하지 않는 글자가 포함되게 되지만, 일종의 "외계어"라고 생각하고 일단 테이블에 포함시킵니다. 이렇게 하면 모두 $ 19 \times 21 \times 28 = 11,172 $개의 값을 가지는 테이블을 구성할 수 있게 됩니다. 실제로 한글의 **UTF-16 코드**는 이런 규칙으로 구성되어 있습니다.
- 한글의 첫번째 글자에 해당하는 "가"의 **UTF-16 코드**는 **44032** 입니다.
- 그리고, javascript에서 글자의 **UTF-16 코드**를 알아내는 메소드는 ```String.charCodeAt()``` 입니다.
- 따라서, 글자 "가"의 **UTF-16 코드**는 ```String("가").charCodeAt(0);```으로 쉽게 알 수 있습니다.

<br/>

# DESCRIPTION

## 한글에서 각 자소 알아내기
- 한글 한 글자에서 자소를 알아내는 메소드를 구성해 보겠습니다. 여러가지 방법이 있겠지만, 초, 중, 종성에 대해 각각 Array를 구성하고 글자의 **UTF-16 코드**를 이용하여 각 자소를 알아내도록 하겠습니다.
- 초, 중, 종성에 대해 각각 Array를 구성하고 원하는 글자의 **UTF-16 코드**를 **String.charCodeAt()** 메소드로 구한 다음 44032를 뺍니다.
- 각 초성마다 중성이 한 번 반복되고, 이 중성마다 종성이 한 번 반복되므로, 초성은 중성과 종성의 곱인 $ 21 \times 28 = 588 $번 마다 순서대로 바뀝니다.<br/>
  ```javascript
  const unicode = String(v).charCodeAt(0);
  const head = Math.floor((unicode-44032)/(21*28));
  ```

- 중성은 각 초성 내에서 종성의 갯수인 28번 마다 순서대로 바뀝니다.<br/>
  ```javascript
  const x = unicode-head*21*28;
  const vowel = Math.floor(x/28);
  ```

- 종성은 각 중성 내에서 순서대로 반영됩니다.<br/>
  ```javascript
  const x = unicode-head*21*28;
  const tail = x%28;
  ```

- 위에서 구한 **head**, **vowel**, **tail**이 초, 중, 종성의 **index**가 됩니다.

## CODE

```javascript
const korean = {
  head: [
		"ㄱ", "ㄲ", "ㄴ", "ㄷ", "ㄸ",
		"ㄹ", "ㅁ", "ㅂ", "ㅃ", "ㅅ",
		"ㅆ", "ㅇ", "ㅈ", "ㅉ", "ㅊ",
		"ㅋ", "ㅌ", "ㅍ", "ㅎ"
	],

  vowel: [
		"ㅏ", "ㅐ", "ㅑ", "ㅒ", "ㅓ",
		"ㅔ", "ㅕ", "ㅖ", "ㅗ", "ㅘ",
		"ㅙ", "ㅚ", "ㅛ", "ㅜ", "ㅝ",
		"ㅞ", "ㅟ", "ㅠ", "ㅡ", "ㅢ",
		"ㅣ"
	],

  tail: [
		"", "ㄱ", "ㄲ", "ㄳ", "ㄴ",
		"ㄵ", "ㄶ", "ㄷ", "ㄹ", "ㄺ",
		"ㄻ", "ㄼ", "ㄽ", "ㄾ", "ㄿ",
		"ㅀ", "ㅁ", "ㅂ", "ㅄ", "ㅅ",
		"ㅆ", "ㅇ", "ㅈ", "ㅊ", "ㅋ",
		"ㅌ", "ㅍ", "ㅎ"
	],

  getCode: function(_v) {
    if(_v == "") return null;

    // 한글의 첫번째 글자인 "가"의 Unicode = 44032 이므로, 44032만큼 빼줍니다.
    let id = _v.charCodeAt(0) - 44032;
    if(id<0 || id > 19*21*28) return null;

    // 초성. 중성과 종성의 조합이 한 벌씩 구성될 때 마다 반복
    let head = Math.floor(id/(21*28));
    // 중성, 종성을 알아내기 위해 해당 초성내에서의 시작점을 보정
    let temp = id - head*(21*28);
    // 종성이 한 벌씩 구성될 때 마다 중성 반복
    let vowel = Math.floor(temp/28);
    // 나머지가 종성의 일련번호가 됨
    let tail = temp%28;

    // 초, 중, 종성 순으로 배열 반환
    return [head, vowel, tail];
  }
}

let a = korean.getCode("가");
console.log(String("가").charCodeAt(0), String("가").charCodeAt(0) - 44032);  // 44032, 0
console.log("초성 =", a[0], korean.head(a[0]));   // 0, "ㄱ"
console.log("중성 =", a[1], korean.vowel(a[1]));  // 0, "ㅏ"
console.log("종성 =", a[2], korean.tail(a[2]));   // 0, ""

a = korean.getCode("닭");
console.log(String("닭").charCodeAt(0), String("닭").charCodeAt(0) - 44032);  // 45805, 1773
console.log("초성 =", a[0], korean.head(a[0]));   // 3, "ㄷ"
console.log("중성 =", a[1], korean.vowel(a[1]));  // 0, "ㅏ"
console.log("종성 =", a[2], korean.tail(a[2]));   // 9, "ㄺ"
```